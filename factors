#!/usr/bin/python3

import sys
import time

def factorize(num):
    """
    Takes a number as input and returns a factorization if possible.

    Args:
        num (int): Input integer to be factorized.

    Returns:
        str: Factorization in the format 'n=p*q' or an empty string if prime.
    """
    for i in range(2, int(num**0.5) + 1):
        quotient, remainder = divmod(num, i)
        if remainder == 0:
            return f"{num}={i}*{quotient}"

    return ""

def read_lines_from_file(file_path):
    """
    Reads lines from a file and returns a list of lines.

    Args:
        file_path (str): Path to the input file.

    Returns:
        list: List of lines read from the file.
    """
    try:
        with open(file_path, 'r') as f:
            return f.read().splitlines()
    except FileNotFoundError:
        print("File not found")
        return []

def main():
    if len(sys.argv) != 2:
        print("Usage: factors <file>")
        sys.exit(1)

    input_file_path = sys.argv[1]
    lines = read_lines_from_file(input_file_path)

    if not lines:
        sys.exit(1)

    start_time = time.time()

    for line in lines:
        try:
            num = int(line.strip())
            factorization = factorize(num)

            if factorization:
                print(factorization)

            if time.time() - start_time > 5:
                print("Time limit exceeded")
                break
        except ValueError:
            print("Invalid number on input file")

if __name__ == '__main__':
    main()
